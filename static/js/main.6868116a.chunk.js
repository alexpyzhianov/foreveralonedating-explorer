(window["webpackJsonpreddit-diagram"]=window["webpackJsonpreddit-diagram"]||[]).push([[0],{22:function(e,t,n){e.exports={tooltip:"Tooltip_tooltip__2efxb"}},24:function(e,t,n){e.exports={heart:"Spinner_heart__2DRhj"}},25:function(e,t,n){e.exports=n(48)},4:function(e,t,n){e.exports={storyline:"StoryLine_storyline__3sU0T",timeline:"StoryLine_timeline__2g2mK",timelineTick:"StoryLine_timelineTick__2h9IT",timelineYear:"StoryLine_timelineYear__4cJCI",columns:"StoryLine_columns__2xOMo",column:"StoryLine_column__38MPb",post:"StoryLine_post__yr64I",selected:"StoryLine_selected__dFYa5"}},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),l=n.n(o),c=n(8),i=n(3),m=n(19),s=n.n(m),u=/\[([m,f])4([m,f])]/gim,f=["https://www.reddit.com/r/GBr4r/comments/bavsby/18_m4f_watchet_just_a_guy_looking_for_a_girl/"];function p(e){return!f.includes(e.url)&&e.fromGender&&e.toGender&&e.age}function d(e){var t=parseInt(e.h,10),n=u.exec(e.h)||[null,null,null],a=Object(i.a)(n,3),r=a[1],o=a[2];return{createdUtc:new Date(1e3*e.t),age:t>=14&&t<150?t:void 0,score:e.s,url:e.u,fromGender:r?r.toLowerCase():void 0,toGender:o?o.toLowerCase():void 0,title:e.h,comments:e.c}}var _=n(20),g=n(51),v=n(23),b=n(6),h=n(50),y=n(21),O=n.n(y),E=n(4),j=n.n(E),w=n(22),S=n.n(w),k=function(e){var t=e.top,n=e.left,a=e.title,o=e.score,l=e.comments,c=e.url;return r.a.createElement("div",{className:S.a.tooltip,style:{top:t,left:n}},r.a.createElement("h4",null,a),r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"post score"},"\u2b06\ufe0f")," ",o),r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"comments"},"\ud83d\udcac\ufe0f")," ",l),r.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},"Open the post"))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var N=r.a.memo(function(e){var t=e.posts,n=r.a.useRef(null),a=O()(n),o=r.a.useState(null),l=Object(i.a)(o,2),c=l[0],m=l[1],s=Object(g.a)(t,function(e){return Object(v.a)(e.createdUtc).valueOf()}),u=Array.from(s).sort(function(e,t){var n=Object(i.a)(e,1)[0];return Object(i.a)(t,1)[0]-n}),f=Object(h.a)().domain([0,271]).range([0,a?a.height:600]),p=Object(h.a)().domain([0,161]).range([18,60]);return r.a.createElement("div",{className:j.a.storyline},r.a.createElement("div",{className:j.a.timeline},u.map(function(e){var t=Object(i.a)(e,1)[0];return r.a.createElement("div",{className:j.a.timelineTick,key:t.toString()},r.a.createElement("div",{className:j.a.timelineYear},Object(b.a)(t,"y")),r.a.createElement("div",null,Object(b.a)(t,"MMM")),r.a.createElement("div",null,Object(b.a)(t,"dd")))})),r.a.createElement("div",{className:j.a.columns,ref:n},u.map(function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{key:n.toString(),className:j.a.column},a.filter(function(e){return e.age&&e.fromGender}).map(function(e){var t,n,a=c&&e.url===c.url?" "+j.a.selected:"";return r.a.createElement("div",{key:e.url,tabIndex:0,className:j.a.post+a,style:{top:f(e.score),fontSize:p(e.comments)},onFocus:function(t){var n=t.target.getBoundingClientRect();m(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({top:n.top,left:document.documentElement.scrollLeft+n.left+n.width/2+40},e))}},(t=e.age,n=e.fromGender,t<20&&"m"===n?"\ud83d\udc66":t<20&&"f"===n?"\ud83d\udc67":t<40&&"m"===n?"\ud83d\udc68":t<40&&"f"===n?"\ud83d\udc69":t<60&&"m"===n?"\ud83d\udc68\u200d\ud83e\uddb3":t<60&&"f"===n?"\ud83d\udc69\u200d\ud83e\uddb3":"f"===n?"\ud83d\udc75":"m"===n?"\ud83d\udc74":"\ud83d\udc7d"))}))})),c&&r.a.createElement(k,c))}),P=n(5),x=n.n(P),G=n(24),T=n.n(G),A=[1e3,5e3,1e4,25742],D=Array(64).fill(0).map(function(e,t){return"./data/out".concat(t,".json")});var I=function(){var e=r.a.useState([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=r.a.useState([]),l=Object(i.a)(o,2),m=l[0],u=l[1];return r.a.useEffect(function(){if(D.length){var e=D.pop();s.a.get(e).then(function(e){var t=e.data.map(d).filter(p);a([].concat(Object(c.a)(n),Object(c.a)(t)))})}},[n]),r.a.useEffect(function(){(!A.length||A[0]<=n.length)&&(u(n),A.shift())},[n]),r.a.createElement("main",{className:x.a.app},m.length>0&&r.a.createElement(N,{posts:m}),A.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:x.a.loading}," ","Loading... (",A.length," left)"," "),r.a.createElement("div",{className:T.a.heart},r.a.createElement("div",null))):r.a.createElement("p",{className:x.a.info},"Get the full"," ",r.a.createElement("a",{href:"https://drive.google.com/open?id=1kLG9ls3zHLFy4HSKRlNdw23r-KJTiA-1",target:"_blank",rel:"noopener noreferrer"},"dataset")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(47);l.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},5:function(e,t,n){e.exports={app:"App_app__1kX79",info:"App_info__3tKmE",loading:"App_loading__wCN4P"}}},[[25,1,2]]]);
//# sourceMappingURL=main.6868116a.chunk.js.map