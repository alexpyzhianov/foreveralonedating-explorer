(window["webpackJsonpreddit-diagram"]=window["webpackJsonpreddit-diagram"]||[]).push([[0],{24:function(e,t,a){e.exports={tooltip:"Tooltip_tooltip__2efxb"}},27:function(e,t,a){e.exports=a(50)},4:function(e,t,a){e.exports={storyline:"StoryLine_storyline__3sU0T",post:"StoryLine_post__yr64I",selected:"StoryLine_selected__dFYa5",day:"StoryLine_day__3RzGy",date:"StoryLine_date__3ZwDY",year:"StoryLine_year__1d-fD"}},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),c=a(11),i=a(3),s=a(22),m=a.n(s),u=/\[([m,f])4([m,f])]/gim,d=["https://www.reddit.com/r/GBr4r/comments/bavsby/18_m4f_watchet_just_a_guy_looking_for_a_girl/"];function f(e){return!d.includes(e.url)&&e.fromGender&&e.toGender&&e.age}function p(e){var t=parseInt(e.h,10),a=u.exec(e.h)||[null,null,null],n=Object(i.a)(a,3),r=n[1],o=n[2];return{createdUtc:new Date(1e3*e.t),age:t>=14&&t<150?t:void 0,score:e.s,url:e.u,fromGender:r?r.toLowerCase():void 0,toGender:o?o.toLowerCase():void 0,title:e.h,comments:e.c}}var _=a(56),g=a(52),v=a(25),h=a(10),y=a(54),b=a(55),E=a(23),j=a.n(E),w=a(4),O=a.n(w),S=a(24),N=a.n(S),k=function(e){var t=e.top,a=e.left,n=e.title,o=e.score,l=e.comments,c=e.url;return r.a.createElement("div",{className:N.a.tooltip,style:{top:t,left:a}},r.a.createElement("h4",null,n),r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"post score"},"\u2b06\ufe0f")," ",o),r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"comments"},"\ud83d\udcac\ufe0f")," ",l),r.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},"Open the post"))};var L=r.a.memo(function(e){var t=e.posts,a=r.a.useRef(null),n=j()(a),o=r.a.useState(null),l=Object(i.a)(o,2),c=l[0],s=l[1],m=Object(_.a)(t,function(e){return Object(v.a)(e.createdUtc).valueOf()}),u=Array.from(m).sort(function(e,t){var a=Object(i.a)(e,1)[0];return Object(i.a)(t,1)[0]-a}),d=Object(g.a)(t,function(e){return e.comments}),f=Object(g.a)(t,function(e){return e.score}),p=Object(y.a)().domain([u[0][0],u[u.length-1][0]]).range([16,40*u.length]),E=Object(b.a)().domain(f).range([60,n?n.height-60:600]),w=Object(b.a)().domain(d).range([18,60]);return r.a.createElement("div",{className:O.a.storyline,ref:a},u.map(function(e){var t=Object(i.a)(e,1)[0];return r.a.createElement("div",{className:O.a.date,style:{left:p(t)},key:t.toString()},r.a.createElement("div",{className:O.a.year},Object(h.a)(t,"y")),r.a.createElement("div",null,Object(h.a)(t,"MMM")),r.a.createElement("div",null,Object(h.a)(t,"dd")))}),u.map(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:a.toString(),className:O.a.day,style:{left:p(a)}},n.filter(function(e){return e.age&&e.fromGender}).map(function(e){var t,a,n=c&&e.url===c.url?" "+O.a.selected:"";return r.a.createElement("div",{key:e.url,tabIndex:0,className:O.a.post+n,style:{top:E(e.score),fontSize:w(e.comments)},onFocus:function(){return s(e)}},(t=e.age,a=e.fromGender,t<20&&"m"===a?"\ud83d\udc66":t<20&&"f"===a?"\ud83d\udc67":t<40&&"m"===a?"\ud83d\udc68":t<40&&"f"===a?"\ud83d\udc69":t<60&&"m"===a?"\ud83d\udc68\u200d\ud83e\uddb3":t<60&&"f"===a?"\ud83d\udc69\u200d\ud83e\uddb3":"f"===a?"\ud83d\udc75":"m"===a?"\ud83d\udc74":"\ud83d\udc7d"))}))}),c&&r.a.createElement(k,{top:E(c.score)+24+w(c.comments),left:p(c.createdUtc)+24+w(c.comments),comments:c.comments,score:c.score,title:c.title,url:c.url}))}),G=a(6),x=a.n(G),A=[1e3,5e3,1e4,25742],C=Array(64).fill(0).map(function(e,t){return"./data/out".concat(t,".json")});var B=function(){var e=r.a.useState([]),t=Object(i.a)(e,2),a=t[0],n=t[1],o=r.a.useState([]),l=Object(i.a)(o,2),s=l[0],u=l[1];return r.a.useEffect(function(){if(C.length){var e=C.pop();m.a.get(e).then(function(e){var t=e.data.map(p).filter(f);n([].concat(Object(c.a)(a),Object(c.a)(t)))})}},[a]),r.a.useEffect(function(){(!A.length||A[0]<=a.length)&&(u(a),A.shift())},[a]),r.a.createElement("main",{className:x.a.appContainer},s.length>0&&r.a.createElement(L,{posts:s}),A.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:x.a.loading}," ","Loading... (",A.length," left)"," "),r.a.createElement("div",{className:x.a.heart},r.a.createElement("div",null))):r.a.createElement("p",{className:x.a.info},"Get the full"," ",r.a.createElement("a",{href:"https://drive.google.com/open?id=1kLG9ls3zHLFy4HSKRlNdw23r-KJTiA-1",target:"_blank",rel:"noopener noreferrer"},"dataset")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(49);l.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},6:function(e,t,a){e.exports={appContainer:"App_appContainer__3jRx1",info:"App_info__3tKmE",loading:"App_loading__wCN4P",heart:"App_heart__2yfYB"}}},[[27,1,2]]]);
//# sourceMappingURL=main.d4f4ac97.chunk.js.map